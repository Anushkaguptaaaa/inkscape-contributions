## Makefile.am fragment sourced by src/Makefile.am.

extension/script/all: extension/script/libscript.a

extension/script/clean:
	rm -f extension/script/libscript.a
	rm -f $(extension_script_libscript_a_OBJECTS)
        

# Note: the link flags are in configure.ac
PERL_CFLAGS  = `perl -MExtUtils::Embed -e ccopts`
#PERL_LDFLAGS = `perl -MExtUtils::Embed -e ldopts`

#INCLUDEPY, LIBPL, LIBRARY
PYTHON_CFLAGS := -I`python -c "import distutils.sysconfig ; print distutils.sysconfig.get_config_var('INCLUDEPY')"`
#PYTHON_LDPATH := `python -c "import distutils.sysconfig ; print distutils.sysconfig.get_config_var('LIBPL')"`
#PYTHON_LIB    := `python -c "import distutils.sysconfig ; print distutils.sysconfig.get_config_var('LIBRARY')"`
#PYTHON_LDFLAGS = $(PYTHON_LDPATH)/$(PYTHON_LIB)


extension_script_libscript_a_CXXFLAGS = $(PERL_CFLAGS) $(PYTHON_CFLAGS)

if WITH_PERL
perl_sources = \
	extension/script/InkscapePerl.h \
	extension/script/InkscapePerl.cpp \
	extension/script/inkscape_perl_wrap.cpp \
	extension/script/inkscape_perl.pm \
	extension/script/inkscape_perl.pm.h
endif

if WITH_PYTHON
python_sources = \
	extension/script/InkscapePython.h \
	extension/script/InkscapePython.cpp \
	extension/script/inkscape_py_wrap.cpp \
	extension/script/inkscape_py.py \
	extension/script/iinkscape_py.py.h
endif

extension_script_libscript_a_SOURCES =	\
	extension/script/InkscapeBinding.h \
	extension/script/InkscapeBinding.cpp \
	extension/script/InkscapeInterpreter.h \
	extension/script/InkscapeInterpreter.cpp \
	extension/script/InkscapeScript.h \
	extension/script/InkscapeScript.cpp \
	$(perl_sources)	\
	$(python_sources)


