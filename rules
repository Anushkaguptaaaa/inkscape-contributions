#!/usr/bin/make -f
# -*- makefile -*-
# debian/rules  for inkscape derived from a sample 
# provided by Joey Hess via dh_make.

# Uncomment this to turn on verbose mode.
export DH_VERBOSE=1

export DEB_BUILD_MAINT_OPTIONS=hardening=+all

# Drop the --parallel flag as soon as we bump to compat 10
# We can do this once we drop support for Ubuntu Xenial and earlier
%:
	dh $@ \
		--buildsystem cmake \
		--parallel          \
		--with bash-completion,python2

# No need for autoreconf in CMake builds
override_dh_autoreconf:

override_dh_auto_configure:
	dh_auto_configure --   \
		-DWITH_DBUS=ON \
		-DGMOCK_DIR="/usr/src/gmock"

override_dh_auto_test:
	export CTEST_OUTPUT_ON_FAILURE=1
	dh_auto_test
